<?xml version='1.0' encoding='UTF-8'?>
<templates id='template' xml:space='preserve'>
    <t t-name="echarts_bar_template">
        <div id="main" style="width:100%; height:100%;">
            <div class="row">
                <div class="col-md-6">
                    <div id="bar1" style="width:100%; height:400px;"></div>
                </div>
                <div class="col-md-6">
                    <div id="bar2" style="width:100%; height:400px;"></div>
                </div>
                <div class="col-md-6">
                    <div id="bar3" style="width:100%; height:400px;"></div>
                </div>
                <!--<div class="col-md-6">-->
                    <!--<div id="bar4" style="width:100%; height:400px;"></div>-->
                <!--</div>-->
                <div id="demo">

                </div>
            </div>
        </div>

        <script>

            var demo = document.getElementById("demo");
            demo.setAttribute("class", "col-md-6");
            var d1 = document.createElement("div");
            d1.setAttribute("id","bar4");
            d1.style.width = "100%";
            d1.style.height = "400px";
            demo.appendChild(d1);


            var chart1 = echarts.init(document.getElementById('bar1'), 'white', {renderer: 'canvas'});
            var chart2 = echarts.init(document.getElementById('bar2'), 'white', {renderer: 'canvas'});
            var chart3 = echarts.init(document.getElementById('bar3'), 'white', {renderer: 'canvas'});
            var chart4 = echarts.init(document.getElementById('bar4'), 'white', {renderer: 'canvas'});

            $(function () {
                fetchData();
            });

            function fetchData() {
                $.ajax({
                    type: "GET",
                    url: "/pyecharts",
                    dataType: 'json',
                    success: function (result) {
                        console.log('success');
                        console.log(result);
                        chart1.setOption(result.bar1);
                        chart2.setOption(result.bar2);
                        chart3.setOption(result.bar3);
                        chart4.setOption(result.bar4);
                    },
                    error: function(request) {
                        console.log("error")
                    },
                });
            }
        </script>
    </t>
</templates>
