<?xml version='1.0' encoding='UTF-8'?>
<templates id='template' xml:space='preserve'>
    <t t-name="echarts_bar_template">
        <div id="main" style="width:100%; height:100%;">
            <div id="bar" style="width:1000px; height:600px;"></div>
        </div>

        <script>
            var chart = echarts.init(document.getElementById('bar'), 'white', {renderer: 'canvas'});

            $(function () {
                fetchData(chart);
            });

            function fetchData() {
                $.ajax({
                    type: "GET",
                    url: "/pyecharts",
                    dataType: 'json',
                    success: function (result) {
                        console.log('success');
                        console.log(result);
                        chart.setOption(result);
                    },
                    error: function(request) {
                        console.log("error")
                    },
                });
            }
        </script>
    </t>
</templates>
